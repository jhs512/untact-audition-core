<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.audictionary.dao.RecruitDao">
	<insert id="doWrite" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO recruitment SET
		regDate = NOW(), updateDate = NOW(),
		title = #{title},
		`body` = #{body},
		memberId = #{memberId},
		boardId = #{boardId},
		roleType = #{roleType},
		location = #{location},
		period = #{period},
		deadline = #{deadline},
		manager = #{manager}
	</insert>
	
	
	<select id="getListForPrint" resultType="Recruit">
		SELECT * FROM recruitment
		WHERE delStatus != 1
		LIMIT #{limit}
	</select>
	
	<select id="getRecruitById" resultType="Recruit">
		SELECT * FROM recruitment
		WHERE id = #{id}
	</select>
	
	<update id="doModify">
		UPDATE recruitment
		<set>
			<if test="isNeedToModify">
				updateDate = NOW()
			</if>
			<if test="title != null and title.length > 0">
				, title = #{title}
			</if>
			<if test="body != null and body.length > 0">
				, `body` = #{body}
			</if>
			<if test="roleType != null and roleType.length > 0">
				, `roleType` = #{roleType}
			</if>
			<if test="location != null and location.length > 0">
				, `location` = #{location}
			</if>
			<if test="period != null and period.length > 0">
				, `period` = #{period}
			</if>
			<if test="deadline != null and deadline.length > 0">
				, `deadline` = #{deadline}
			</if>
			<if test="manager != null and manager.length > 0">
				, `manager` = #{manager}
			</if>
		</set>
		WHERE id = #{recruitmentId} 
		AND memberId = #{memberId}
	</update>
	
</mapper>